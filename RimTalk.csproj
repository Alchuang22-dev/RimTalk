<Project Sdk="Microsoft.NET.Sdk">

	<PropertyGroup>
		<OutputType>Library</OutputType>
		<TargetFramework>net48</TargetFramework>
		<PlatformTarget>x64</PlatformTarget>
		<RootNamespace>RimTalk</RootNamespace>
		<AssemblyName>RimTalk</AssemblyName>
		<OutputPath>1.6/Assemblies</OutputPath>
		<AppendTargetFrameworkToOutputPath>false</AppendTargetFrameworkToOutputPath>

		<RimWorldDir Condition=" '$(RimWorldDir)' == '' ">$(RIMWORLD_DIR)</RimWorldDir>

		<ModFolderName>RimTalk</ModFolderName>
	</PropertyGroup>

	<ItemGroup>
		<Reference Include="$(RimWorldDir)/Contents/Resources/Data/Managed/*.dll">
			<Private>False</Private>
		</Reference>
		<Reference Include="$(RimWorldDir)/../../../workshop/content/294100/2009463077/Current/Assemblies/0Harmony.dll">
			<Private>False</Private>
		</Reference>
		<Reference Include="$(RimWorldDir)/../../../workshop/content/294100/1516158345/Assemblies/Bubbles.dll">
			<Private>False</Private>
		</Reference>
		<Reference Include="Microsoft.CSharp" />
	</ItemGroup>

	<Target Name="DeployToModsFolder" AfterTargets="Build">
		<Message Text="--- Deploying Mod to RimWorld Mods folder ---" Importance="high" />

		<PropertyGroup>
			<DeployPath>$(RimWorldDir)/Mods/$(ModFolderName)/</DeployPath>
		</PropertyGroup>

		<MakeDir Directories="$(DeployPath)" />

		<Exec Command="rsync -a --delete --checksum &quot;$(ProjectDir)About/&quot; &quot;$(DeployPath)About/&quot;" />
		<Exec Command="rsync -a --delete --checksum &quot;$(ProjectDir)Defs/&quot; &quot;$(DeployPath)Defs/&quot;" />
		<Exec Command="rsync -a --delete --checksum &quot;$(ProjectDir)Languages/&quot; &quot;$(DeployPath)Languages/&quot;" />
		<Exec Command="rsync -a --delete --checksum &quot;$(ProjectDir)Textures/&quot; &quot;$(DeployPath)Textures/&quot;" />
		<Exec Command="rsync -a --delete --checksum &quot;$(ProjectDir)1.6/&quot; &quot;$(DeployPath)1.6/&quot;" />

		<Message Text="--- Deployment finished successfully ---" Importance="high" />
	</Target>

</Project>